{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\album-shelf\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\album-shelf\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\album-shelf\\\\client\\\\src\\\\pages\\\\Forms\\\\EditForm.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Formik, FieldArray } from \"formik\";\nimport { validationSchema } from \"./helpers/validation\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport Error from \"./helpers/Error\";\nimport FileUpload from \"./helpers/FileUpload\";\nimport MapList from \"./helpers/MapList\";\nexport default function EditForm() {\n  var history = useHistory();\n  var UserId = parseInt(useParams().id);\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      results = _useState2[0],\n      setResults = _useState2[1];\n\n  useEffect(function () {\n    var fetchData = function fetchData() {\n      var result;\n      return _regeneratorRuntime.async(function fetchData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(axios(\"http://localhost:3007/albums/\" + UserId));\n\n            case 2:\n              result = _context.sent;\n              setResults(result.data);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    fetchData();\n  }, []);\n\n  var _FileUpload = FileUpload(),\n      onSubmitUpload = _FileUpload.onSubmitUpload,\n      onchangeUpload = _FileUpload.onchangeUpload,\n      filename = _FileUpload.filename,\n      uploaded = _FileUpload.uploaded;\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, React.createElement(Formik, {\n    enableReinitialize: true,\n    initialValues: {\n      artist: results.artist,\n      title: results.title,\n      description: results.description,\n      year: results.date,\n      image: results.image,\n      track: results.track,\n      tracks: results.tracks\n    },\n    validationSchema: validationSchema,\n    onSubmit: function onSubmit(values, _ref) {\n      var setSubmitting = _ref.setSubmitting;\n      setSubmitting(true);\n      fetch(\"http://localhost:3007/albums/\" + UserId, {\n        method: \"PUT\",\n        headers: {\n          Accept: \"application/json\",\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          artist: values.artist,\n          title: values.title,\n          description: values.description,\n          image: \"/uploads/\" + filename,\n          year: values.year,\n          tracks: values.tracks\n        })\n      });\n      onSubmitUpload();\n      history.push(\"/\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }, function (_ref2) {\n    var values = _ref2.values,\n        errors = _ref2.errors,\n        touched = _ref2.touched,\n        handleChange = _ref2.handleChange,\n        handleBlur = _ref2.handleBlur,\n        handleSubmit = _ref2.handleSubmit,\n        isSubmitting = _ref2.isSubmitting;\n    return React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Artist: \"), React.createElement(\"input\", {\n      className: \"textinput\",\n      onBlur: handleBlur,\n      type: \"text\",\n      id: \"artist\",\n      name: \"artist\",\n      value: values.artist,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(Error, {\n      touched: touched.artist,\n      message: errors.artist,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Title: \"), React.createElement(\"input\", {\n      className: \"textinput\",\n      onBlur: handleBlur,\n      type: \"text\",\n      id: \"title\",\n      name: \"title\",\n      value: values.title,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(Error, {\n      touched: touched.title,\n      message: errors.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Description: \"), React.createElement(\"textarea\", {\n      name: \"description\",\n      id: \"description\",\n      onBlur: handleBlur,\n      value: values.description,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(Error, {\n      touched: touched.description,\n      message: errors.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Year: \"), React.createElement(\"input\", {\n      className: \"textinput\",\n      id: \"year\",\n      name: \"year\",\n      type: \"text\",\n      value: values.quantity,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(Error, {\n      touched: touched.year,\n      message: errors.year,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Tracks: \"), React.createElement(FieldArray, {\n      className: \"textinput\",\n      id: \"tracks\",\n      name: \"tracks\",\n      type: \"text\",\n      value: values.tracks,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, function (_ref3) {\n      var push = _ref3.push;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        onClick: function onClick() {\n          return push(values.track);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Add\"), React.createElement(\"input\", {\n        type: \"text\",\n        id: \"track\",\n        name: \"track\",\n        values: values.track,\n        onChange: handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"ol\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, values.tracks.map(function (track) {\n        return React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, track);\n      }))));\n    }), React.createElement(Error, {\n      touched: touched.tracks,\n      message: errors.tracks,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      name: \"image\",\n      id: \"image\",\n      accept: \"image/*\",\n      onChange: onchangeUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, filename), uploaded ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Cover uploaded!\") : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Upload a Cover!\"))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"submitbutton\",\n      type: \"submit\",\n      disabled: isSubmitting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Submit!\")));\n  }));\n}","map":{"version":3,"sources":["C:/Users/jolej/Documents/GitHub/album-shelf/client/src/pages/Forms/EditForm.js"],"names":["React","useState","useEffect","axios","Formik","FieldArray","validationSchema","useHistory","useParams","Error","FileUpload","MapList","EditForm","history","UserId","parseInt","id","results","setResults","fetchData","result","data","onSubmitUpload","onchangeUpload","filename","uploaded","artist","title","description","year","date","image","track","tracks","values","setSubmitting","fetch","method","headers","Accept","body","JSON","stringify","push","errors","touched","handleChange","handleBlur","handleSubmit","isSubmitting","quantity","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Formik, FieldArray } from \"formik\";\r\nimport { validationSchema } from \"./helpers/validation\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport Error from \"./helpers/Error\";\r\nimport FileUpload from \"./helpers/FileUpload\";\r\nimport MapList from \"./helpers/MapList\";\r\n\r\nexport default function EditForm() {\r\n  const history = useHistory();\r\n  const UserId = parseInt(useParams().id);\r\n  const [results, setResults] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const result = await axios(\"http://localhost:3007/albums/\" + UserId);\r\n      setResults(result.data);\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  const { onSubmitUpload, onchangeUpload, filename, uploaded } = FileUpload();\r\n\r\n  return (\r\n    <div>\r\n      <Formik\r\n        enableReinitialize\r\n        initialValues={{\r\n          artist: results.artist,\r\n          title: results.title,\r\n          description: results.description,\r\n          year: results.date,\r\n          image: results.image,\r\n          track: results.track,\r\n          tracks: results.tracks\r\n        }}\r\n        validationSchema={validationSchema}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n          setSubmitting(true);\r\n          fetch(\"http://localhost:3007/albums/\" + UserId, {\r\n            method: \"PUT\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"content-type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n              artist: values.artist,\r\n              title: values.title,\r\n              description: values.description,\r\n              image: \"/uploads/\" + filename,\r\n              year: values.year,\r\n              tracks: values.tracks\r\n            })\r\n          });\r\n          onSubmitUpload();\r\n          history.push(\"/\");\r\n        }}\r\n      >\r\n        {({\r\n          values,\r\n          errors,\r\n          touched,\r\n          handleChange,\r\n          handleBlur,\r\n          handleSubmit,\r\n          isSubmitting\r\n        }) => (\r\n          <form onSubmit={handleSubmit}>\r\n            <div>\r\n              <br />\r\n\r\n              <label>Artist: </label>\r\n              <input\r\n                className=\"textinput\"\r\n                onBlur={handleBlur}\r\n                type=\"text\"\r\n                id=\"artist\"\r\n                name=\"artist\"\r\n                value={values.artist}\r\n                onChange={handleChange}\r\n              />\r\n              <Error touched={touched.artist} message={errors.artist} />\r\n\r\n              <br />\r\n              <label>Title: </label>\r\n              <input\r\n                className=\"textinput\"\r\n                onBlur={handleBlur}\r\n                type=\"text\"\r\n                id=\"title\"\r\n                name=\"title\"\r\n                value={values.title}\r\n                onChange={handleChange}\r\n              />\r\n              <Error touched={touched.title} message={errors.title} />\r\n              <br />\r\n\r\n              <label>Description: </label>\r\n              <textarea\r\n                name=\"description\"\r\n                id=\"description\"\r\n                onBlur={handleBlur}\r\n                value={values.description}\r\n                onChange={handleChange}\r\n              />\r\n              <Error\r\n                touched={touched.description}\r\n                message={errors.description}\r\n              />\r\n              <br />\r\n\r\n              <label>Year: </label>\r\n              <input\r\n                className=\"textinput\"\r\n                id=\"year\"\r\n                name=\"year\"\r\n                type=\"text\"\r\n                value={values.quantity}\r\n                onChange={handleChange}\r\n              />\r\n              <Error touched={touched.year} message={errors.year} />\r\n\r\n              <label>Tracks: </label>\r\n              <FieldArray\r\n                className=\"textinput\"\r\n                id=\"tracks\"\r\n                name=\"tracks\"\r\n                type=\"text\"\r\n                value={values.tracks}\r\n                onChange={handleChange}\r\n              >\r\n                {({ push }) => (\r\n                  <div>\r\n                    <button type=\"button\" onClick={() => push(values.track)}>\r\n                      Add\r\n                    </button>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"track\"\r\n                      name=\"track\"\r\n                      values={values.track}\r\n                      onChange={handleChange}\r\n                    />\r\n                    <div>\r\n                      <ol>\r\n                        {values.tracks.map(track => {\r\n                          return <li>{track}</li>;\r\n                        })}\r\n                      </ol>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </FieldArray>\r\n              <Error touched={touched.tracks} message={errors.tracks} />\r\n\r\n              {/* PHOTO */}\r\n\r\n              <>\r\n                <div>\r\n                  <input\r\n                    type=\"file\"\r\n                    name=\"image\"\r\n                    id=\"image\"\r\n                    accept=\"image/*\"\r\n                    onChange={onchangeUpload}\r\n                  />\r\n                  <label htmlFor=\"image\">{filename}</label>\r\n                  {uploaded ? (\r\n                    <div>Cover uploaded!</div>\r\n                  ) : (\r\n                    <div>Upload a Cover!</div>\r\n                  )}\r\n                </div>\r\n              </>\r\n              <br />\r\n\r\n              <button\r\n                className=\"submitbutton\"\r\n                type=\"submit\"\r\n                disabled={isSubmitting}\r\n              >\r\n                Submit!\r\n              </button>\r\n\r\n              {/* <button className='submitbutton' onClick={<Redirect to='/' />}> Go back! </button> */}\r\n            </div>\r\n          </form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}