{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\album-shelf\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\album-shelf\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\album-shelf\\\\client\\\\src\\\\pages\\\\Forms\\\\EditForm.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Formik, FieldArray } from \"formik\";\nimport { validationSchema } from \"./helpers/validation\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport Error from \"./helpers/Error\";\nimport FileUpload from \"./helpers/FileUpload\";\nimport MapList from \"./helpers/MapList\";\nimport { IoIosArrowBack, IoIosCheckmark } from \"react-icons/io\";\nexport default function EditForm(props) {\n  var history = useHistory();\n  var UserId = props.id;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      results = _useState2[0],\n      setResults = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showTracks = _useState4[0],\n      setShowTracks = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      ID = _useState6[0],\n      setID = _useState6[1];\n\n  useEffect(function () {\n    var fetchData = function fetchData() {\n      var result;\n      return _regeneratorRuntime.async(function fetchData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(axios(\"http://localhost:3007/albums/\" + UserId));\n\n            case 2:\n              result = _context.sent;\n              setResults(result.data);\n              setID(result.id);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    fetchData();\n  }, [results.image]);\n\n  var _FileUpload = FileUpload(),\n      onSubmitUpload = _FileUpload.onSubmitUpload,\n      onchangeUpload = _FileUpload.onchangeUpload,\n      filename = _FileUpload.filename,\n      uploaded = _FileUpload.uploaded;\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, React.createElement(Formik, {\n    enableReinitialize: true,\n    initialValues: {\n      artist: results.artist,\n      title: results.title,\n      year: results.date,\n      image: results.image,\n      track: results.track,\n      tracks: results.tracks\n    },\n    validationSchema: validationSchema,\n    onSubmit: function onSubmit(values, _ref) {\n      var setSubmitting = _ref.setSubmitting;\n      setSubmitting(true);\n      fetch(\"http://localhost:3007/albums/\" + ID, {\n        method: \"PUT\",\n        headers: {\n          Accept: \"application/json\",\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          artist: values.artist,\n          title: values.title,\n          description: values.description,\n          image: values.image,\n          year: values.year,\n          track: values.track,\n          tracks: values.tracks\n        })\n      });\n      onSubmitUpload();\n      history.push(\"/\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, function (_ref2) {\n    var values = _ref2.values,\n        errors = _ref2.errors,\n        touched = _ref2.touched,\n        handleChange = _ref2.handleChange,\n        handleBlur = _ref2.handleBlur,\n        handleSubmit = _ref2.handleSubmit,\n        isSubmitting = _ref2.isSubmitting;\n    return React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"forms\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"cover_photo\",\n      src: uploaded ? values.image : results.image,\n      alt: \"No File\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"submitbuttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"submitbutton\",\n      onClick: function onClick() {\n        return history.push(\"/\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(IoIosArrowBack, {\n      className: \"backIcon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"submitbutton\",\n      type: \"submit\",\n      disabled: isSubmitting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(IoIosCheckmark, {\n      className: \"submitIcon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }))), React.createElement(\"input\", {\n      className: \"artist_name_form\",\n      onBlur: handleBlur,\n      placeholder: \"Artist's name\",\n      type: \"text\",\n      id: \"artist\",\n      name: \"artist\",\n      value: values.artist,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(Error, {\n      touched: touched.artist,\n      message: errors.artist,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"title_form\",\n      onBlur: handleBlur,\n      placeholder: \"Album's title\",\n      type: \"text\",\n      id: \"title\",\n      name: \"title\",\n      value: values.title,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(Error, {\n      touched: touched.title,\n      message: errors.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"date_of_release\",\n      placeholder: \"Year of album's release\",\n      id: \"year\",\n      name: \"year\",\n      type: \"text\",\n      value: values.quantity,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(Error, {\n      touched: touched.year,\n      message: errors.year,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      onClick: function onClick() {\n        return setShowTracks(!showTracks);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Show Tracks\"), showTracks ? React.createElement(\"div\", {\n      className: \"tracks_div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"tracks_label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Tracks: \"), React.createElement(FieldArray, {\n      id: \"tracks\",\n      name: \"tracks\",\n      type: \"text\",\n      value: values.tracks,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, function (_ref3) {\n      var push = _ref3.push;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"addTrack_button\",\n        type: \"reset\",\n        onClick: function onClick() {\n          return push(values.track);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Add\"), React.createElement(\"input\", {\n        className: \"addTrack_form\",\n        placeholder: \"Track's name\",\n        type: \"text\",\n        id: \"track\",\n        name: \"track\",\n        values: values.track,\n        onChange: handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }));\n    }), React.createElement(Error, {\n      touched: touched.tracks,\n      message: errors.tracks,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), React.createElement(MapList, {\n      id: UserId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    })) : null, \";\", React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"addPhoto_button\",\n      type: \"file\",\n      name: \"image\",\n      id: \"image\",\n      accept: \"image/*\",\n      onChange: onchangeUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), uploaded ? values.image = \"/uploads/\" + filename : values.image = results.image, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }), values.image)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    })));\n  }));\n}","map":{"version":3,"sources":["C:/Users/jolej/Documents/GitHub/album-shelf/client/src/pages/Forms/EditForm.js"],"names":["React","useState","useEffect","axios","Formik","FieldArray","validationSchema","useHistory","useParams","Error","FileUpload","MapList","IoIosArrowBack","IoIosCheckmark","EditForm","props","history","UserId","id","results","setResults","showTracks","setShowTracks","ID","setID","fetchData","result","data","image","onSubmitUpload","onchangeUpload","filename","uploaded","artist","title","year","date","track","tracks","values","setSubmitting","fetch","method","headers","Accept","body","JSON","stringify","description","push","errors","touched","handleChange","handleBlur","handleSubmit","isSubmitting","quantity"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,EAAiBC,UAAjB,QAAmC,QAAnC;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,kBAAtC;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,gBAA/C;AAEA,eAAe,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACtC,MAAMC,OAAO,GAAGT,UAAU,EAA1B;AACA,MAAMU,MAAM,GAAGF,KAAK,CAACG,EAArB;;AAFsC,kBAGRjB,QAAQ,CAAC,EAAD,CAHA;AAAA;AAAA,MAG/BkB,OAH+B;AAAA,MAGtBC,UAHsB;;AAAA,mBAIFnB,QAAQ,CAAC,KAAD,CAJN;AAAA;AAAA,MAI/BoB,UAJ+B;AAAA,MAInBC,aAJmB;;AAAA,mBAKlBrB,QAAQ,CAAC,EAAD,CALU;AAAA;AAAA,MAK/BsB,EAL+B;AAAA,MAK3BC,KAL2B;;AAOtCtB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMuB,SAAS,GAAG,SAAZA,SAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACKtB,KAAK,CAAC,kCAAkCc,MAAnC,CADV;;AAAA;AACVS,cAAAA,MADU;AAEhBN,cAAAA,UAAU,CAACM,MAAM,CAACC,IAAR,CAAV;AACAH,cAAAA,KAAK,CAACE,MAAM,CAACR,EAAR,CAAL;;AAHgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAlB;;AAKAO,IAAAA,SAAS;AACV,GAPQ,EAON,CAACN,OAAO,CAACS,KAAT,CAPM,CAAT;;AAPsC,oBAgByBlB,UAAU,EAhBnC;AAAA,MAgB9BmB,cAhB8B,eAgB9BA,cAhB8B;AAAA,MAgBdC,cAhBc,eAgBdA,cAhBc;AAAA,MAgBEC,QAhBF,eAgBEA,QAhBF;AAAA,MAgBYC,QAhBZ,eAgBYA,QAhBZ;;AAkBtC,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AACE,IAAA,kBAAkB,MADpB;AAEE,IAAA,aAAa,EAAE;AACbC,MAAAA,MAAM,EAAEd,OAAO,CAACc,MADH;AAEbC,MAAAA,KAAK,EAAEf,OAAO,CAACe,KAFF;AAGbC,MAAAA,IAAI,EAAEhB,OAAO,CAACiB,IAHD;AAIbR,MAAAA,KAAK,EAAET,OAAO,CAACS,KAJF;AAKbS,MAAAA,KAAK,EAAElB,OAAO,CAACkB,KALF;AAMbC,MAAAA,MAAM,EAAEnB,OAAO,CAACmB;AANH,KAFjB;AAUE,IAAA,gBAAgB,EAAEhC,gBAVpB;AAWE,IAAA,QAAQ,EAAE,kBAACiC,MAAD,QAA+B;AAAA,UAApBC,aAAoB,QAApBA,aAAoB;AACvCA,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAC,MAAAA,KAAK,CAAC,kCAAkClB,EAAnC,EAAuC;AAC1CmB,QAAAA,MAAM,EAAE,KADkC;AAE1CC,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAE,kBADD;AAEP,0BAAgB;AAFT,SAFiC;AAM1CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBd,UAAAA,MAAM,EAAEM,MAAM,CAACN,MADI;AAEnBC,UAAAA,KAAK,EAAEK,MAAM,CAACL,KAFK;AAGnBc,UAAAA,WAAW,EAAET,MAAM,CAACS,WAHD;AAInBpB,UAAAA,KAAK,EAAEW,MAAM,CAACX,KAJK;AAKnBO,UAAAA,IAAI,EAAEI,MAAM,CAACJ,IALM;AAMnBE,UAAAA,KAAK,EAAEE,MAAM,CAACF,KANK;AAOnBC,UAAAA,MAAM,EAAEC,MAAM,CAACD;AAPI,SAAf;AANoC,OAAvC,CAAL;AAgBAT,MAAAA,cAAc;AACdb,MAAAA,OAAO,CAACiC,IAAR,CAAa,GAAb;AACD,KA/BH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAiCG;AAAA,QACCV,MADD,SACCA,MADD;AAAA,QAECW,MAFD,SAECA,MAFD;AAAA,QAGCC,OAHD,SAGCA,OAHD;AAAA,QAICC,YAJD,SAICA,YAJD;AAAA,QAKCC,UALD,SAKCA,UALD;AAAA,QAMCC,YAND,SAMCA,YAND;AAAA,QAOCC,YAPD,SAOCA,YAPD;AAAA,WASC;AAAM,MAAA,QAAQ,EAAED,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,SAAS,EAAC,aADZ;AAEE,MAAA,GAAG,EAAEtB,QAAQ,GAAGO,MAAM,CAACX,KAAV,GAAkBT,OAAO,CAACS,KAFzC;AAGE,MAAA,GAAG,EAAC,SAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,EAQG;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AACE,MAAA,SAAS,EAAC,cADZ;AAEE,MAAA,OAAO,EAAE;AAAA,eAAMZ,OAAO,CAACiC,IAAR,CAAa,GAAb,CAAN;AAAA,OAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE,oBAAC,cAAD;AAAgB,MAAA,SAAS,EAAC,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CADD,EAQC;AACE,MAAA,SAAS,EAAC,cADZ;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,QAAQ,EAAEM,YAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKE,oBAAC,cAAD;AAAgB,MAAA,SAAS,EAAC,YAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,CARD,CARH,EAyBE;AACE,MAAA,SAAS,EAAC,kBADZ;AAEE,MAAA,MAAM,EAAEF,UAFV;AAGE,MAAA,WAAW,EAAC,eAHd;AAIE,MAAA,IAAI,EAAC,MAJP;AAKE,MAAA,EAAE,EAAC,QALL;AAME,MAAA,IAAI,EAAC,QANP;AAOE,MAAA,KAAK,EAAEd,MAAM,CAACN,MAPhB;AAQE,MAAA,QAAQ,EAAEmB,YARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzBF,EAmCE,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAED,OAAO,CAAClB,MAAxB;AAAgC,MAAA,OAAO,EAAEiB,MAAM,CAACjB,MAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnCF,EAoCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApCF,EAqCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArCF,EAsCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtCF,EAwCE;AACE,MAAA,SAAS,EAAC,YADZ;AAEE,MAAA,MAAM,EAAEoB,UAFV;AAGE,MAAA,WAAW,EAAC,eAHd;AAIE,MAAA,IAAI,EAAC,MAJP;AAKE,MAAA,EAAE,EAAC,OALL;AAME,MAAA,IAAI,EAAC,OANP;AAOE,MAAA,KAAK,EAAEd,MAAM,CAACL,KAPhB;AAQE,MAAA,QAAQ,EAAEkB,YARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxCF,EAkDE,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAED,OAAO,CAACjB,KAAxB;AAA+B,MAAA,OAAO,EAAEgB,MAAM,CAAChB,KAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlDF,EAmDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnDF,EAoDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApDF,EAqDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArDF,EAsDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtDF,EAuDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvDF,EAyDE;AACE,MAAA,SAAS,EAAC,iBADZ;AAEE,MAAA,WAAW,EAAC,yBAFd;AAGE,MAAA,EAAE,EAAC,MAHL;AAIE,MAAA,IAAI,EAAC,MAJP;AAKE,MAAA,IAAI,EAAC,MALP;AAME,MAAA,KAAK,EAAEK,MAAM,CAACiB,QANhB;AAOE,MAAA,QAAQ,EAAEJ,YAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzDF,EAkEE,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAED,OAAO,CAAChB,IAAxB;AAA8B,MAAA,OAAO,EAAEe,MAAM,CAACf,IAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlEF,EAqEE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAE;AAAA,eAAMb,aAAa,CAAC,CAACD,UAAF,CAAnB;AAAA,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBArEF,EAwEGA,UAAU,GACT;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,SAAS,EAAC,cAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE,oBAAC,UAAD;AACE,MAAA,EAAE,EAAC,QADL;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,IAAI,EAAC,MAHP;AAIE,MAAA,KAAK,EAAEkB,MAAM,CAACD,MAJhB;AAKE,MAAA,QAAQ,EAAEc,YALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOG;AAAA,UAAGH,IAAH,SAAGA,IAAH;AAAA,aACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,SAAS,EAAC,iBADZ;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,OAAO,EAAE;AAAA,iBAAMA,IAAI,CAACV,MAAM,CAACF,KAAR,CAAV;AAAA,SAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAQE;AACE,QAAA,SAAS,EAAC,eADZ;AAEE,QAAA,WAAW,EAAC,cAFd;AAGE,QAAA,IAAI,EAAC,MAHP;AAIE,QAAA,EAAE,EAAC,OAJL;AAKE,QAAA,IAAI,EAAC,OALP;AAME,QAAA,MAAM,EAAEE,MAAM,CAACF,KANjB;AAOE,QAAA,QAAQ,EAAEe,YAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,CADD;AAAA,KAPH,CAFF,EA8BE,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAED,OAAO,CAACb,MAAxB;AAAgC,MAAA,OAAO,EAAEY,MAAM,CAACZ,MAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA9BF,EA+BE,oBAAC,OAAD;AAAS,MAAA,EAAE,EAAErB,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA/BF,CADS,GAkCP,IA1GN,OA4GE,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,SAAS,EAAC,iBADZ;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,IAAI,EAAC,OAHP;AAIE,MAAA,EAAE,EAAC,OAJL;AAKE,MAAA,MAAM,EAAC,SALT;AAME,MAAA,QAAQ,EAAEa,cANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EASGE,QAAQ,GACJO,MAAM,CAACX,KAAP,GAAe,cAAcG,QADzB,GAEJQ,MAAM,CAACX,KAAP,GAAeT,OAAO,CAACS,KAX9B,EAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZF,EAaGW,MAAM,CAACX,KAbV,CADF,CA5GF,EA6HE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7HF,CADF,CATD;AAAA,GAjCH,CADF,CADF;AAiLD","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Formik, FieldArray } from \"formik\";\r\nimport { validationSchema } from \"./helpers/validation\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport Error from \"./helpers/Error\";\r\nimport FileUpload from \"./helpers/FileUpload\";\r\nimport MapList from \"./helpers/MapList\";\r\nimport { IoIosArrowBack, IoIosCheckmark } from \"react-icons/io\";\r\n\r\nexport default function EditForm(props) {\r\n  const history = useHistory();\r\n  const UserId = props.id;\r\n  const [results, setResults] = useState(\"\");\r\n  const [showTracks, setShowTracks] = useState(false);\r\n  const [ID, setID] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const result = await axios(\"http://localhost:3007/albums/\" + UserId);\r\n      setResults(result.data);\r\n      setID(result.id)\r\n    };\r\n    fetchData();\r\n  }, [results.image]);\r\n\r\n  const { onSubmitUpload, onchangeUpload, filename, uploaded } = FileUpload();\r\n\r\n  return (\r\n    <div>\r\n      <Formik\r\n        enableReinitialize\r\n        initialValues={{\r\n          artist: results.artist,\r\n          title: results.title,\r\n          year: results.date,\r\n          image: results.image,\r\n          track: results.track,\r\n          tracks: results.tracks\r\n        }}\r\n        validationSchema={validationSchema}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n          setSubmitting(true);\r\n          fetch(\"http://localhost:3007/albums/\" + ID, {\r\n            method: \"PUT\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"content-type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n              artist: values.artist,\r\n              title: values.title,\r\n              description: values.description,\r\n              image: values.image,\r\n              year: values.year,\r\n              track: values.track,\r\n              tracks: values.tracks\r\n            })\r\n          });\r\n          onSubmitUpload();\r\n          history.push(\"/\");\r\n        }}\r\n      >\r\n        {({\r\n          values,\r\n          errors,\r\n          touched,\r\n          handleChange,\r\n          handleBlur,\r\n          handleSubmit,\r\n          isSubmitting\r\n        }) => (\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"forms\">\r\n              <img\r\n                className=\"cover_photo\"\r\n                src={uploaded ? values.image : results.image}\r\n                alt=\"No File\"\r\n              />\r\n              <br />\r\n               {/* Submit button */}\r\n               <div className=\"submitbuttons\">\r\n                <button\r\n                  className=\"submitbutton\"\r\n                  onClick={() => history.push(\"/\")}\r\n                >\r\n                  <IoIosArrowBack className=\"backIcon\" />\r\n                </button>\r\n\r\n                <button\r\n                  className=\"submitbutton\"\r\n                  type=\"submit\"\r\n                  disabled={isSubmitting}\r\n                >\r\n                  <IoIosCheckmark className=\"submitIcon\" />\r\n                </button>\r\n              </div>\r\n              {/* Artist name */}\r\n              <input\r\n                className=\"artist_name_form\"\r\n                onBlur={handleBlur}\r\n                placeholder=\"Artist's name\"\r\n                type=\"text\"\r\n                id=\"artist\"\r\n                name=\"artist\"\r\n                value={values.artist}\r\n                onChange={handleChange}\r\n              />\r\n              <Error touched={touched.artist} message={errors.artist} />\r\n              <br />\r\n              <br />\r\n              <br />\r\n              {/* Title */}\r\n              <input\r\n                className=\"title_form\"\r\n                onBlur={handleBlur}\r\n                placeholder=\"Album's title\"\r\n                type=\"text\"\r\n                id=\"title\"\r\n                name=\"title\"\r\n                value={values.title}\r\n                onChange={handleChange}\r\n              />\r\n              <Error touched={touched.title} message={errors.title} />\r\n              <br />\r\n              <br />\r\n              <br />\r\n              <br />\r\n              <br />\r\n              {/* Year of release */}\r\n              <input\r\n                className=\"date_of_release\"\r\n                placeholder=\"Year of album's release\"\r\n                id=\"year\"\r\n                name=\"year\"\r\n                type=\"text\"\r\n                value={values.quantity}\r\n                onChange={handleChange}\r\n              />\r\n              <Error touched={touched.year} message={errors.year} />\r\n            \r\n              {/* Tracks */}\r\n              <button type=\"button\" onClick={() => setShowTracks(!showTracks)}>\r\n                Show Tracks\r\n              </button>\r\n              {showTracks ? (\r\n                <div className=\"tracks_div\">\r\n                  <label className=\"tracks_label\">Tracks: </label>\r\n                  <FieldArray\r\n                    id=\"tracks\"\r\n                    name=\"tracks\"\r\n                    type=\"text\"\r\n                    value={values.tracks}\r\n                    onChange={handleChange}\r\n                  >\r\n                    {({ push }) => (\r\n                      <div>\r\n                        <button\r\n                          className=\"addTrack_button\"\r\n                          type=\"reset\"\r\n                          onClick={() => push(values.track)}\r\n                        >\r\n                          Add\r\n                        </button>\r\n                        <input\r\n                          className=\"addTrack_form\"\r\n                          placeholder=\"Track's name\"\r\n                          type=\"text\"\r\n                          id=\"track\"\r\n                          name=\"track\"\r\n                          values={values.track}\r\n                          onChange={handleChange}\r\n                        />\r\n                      </div>\r\n                    )}\r\n                  </FieldArray>\r\n                  <Error touched={touched.tracks} message={errors.tracks} />\r\n                  <MapList id={UserId} />\r\n                </div>\r\n              ) : null}\r\n              ;{/* PHOTO */}\r\n              <>\r\n                <div>\r\n                  <input\r\n                    className=\"addPhoto_button\"\r\n                    type=\"file\"\r\n                    name=\"image\"\r\n                    id=\"image\"\r\n                    accept=\"image/*\"\r\n                    onChange={onchangeUpload}\r\n                  />\r\n                  {uploaded\r\n                    ? (values.image = \"/uploads/\" + filename)\r\n                    : (values.image = results.image)}\r\n                  <br />\r\n                  {values.image}\r\n                </div>\r\n              </>\r\n              <br />\r\n            </div>\r\n          </form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}