{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar UseModalContext_1 = __importDefault(require(\"./UseModalContext\"));\n\nvar react_useportal_1 = __importDefault(require(\"react-useportal\"));\n\nvar body_scroll_lock_1 = require(\"body-scroll-lock\");\n\nvar utils_1 = require(\"./utils\");\n\nvar use_ssr_1 = __importDefault(require(\"use-ssr\"));\n\nvar defaults = {\n  onOpen: function onOpen() {},\n  onClose: function onClose() {},\n  background: ''\n};\nvar modalStyles = \"\\n  position: fixed;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%,-50%);\\n  z-index: 1000;\\n\";\n\nexports.useModal = function (_a) {\n  if (_a === void 0) {\n    _a = defaults;\n  }\n\n  var _onOpen = _a.onOpen,\n      _onClose = _a.onClose,\n      background = _a.background,\n      config = __rest(_a, [\"onOpen\", \"onClose\", \"background\"]);\n\n  var isServer = use_ssr_1.default().isServer;\n  var context = react_1.useContext(UseModalContext_1.default);\n  var bg = background === null ? '' : background || context.background;\n  var modal = react_1.useRef();\n\n  var _b = react_useportal_1.default(__assign({\n    onOpen: function onOpen(event) {\n      if (isServer) return;\n      body_scroll_lock_1.disableBodyScroll(document.body); // eslint-disable-next-line no-param-reassign\n\n      event.portal.current.style.cssText = \"\\n        position: absolute;\\n        background: \" + (bg ? bg : 'transparent') + \";\\n        width: 100vw;\\n        height: 100vh;\\n        top: \" + window.scrollY + \"px;\\n        left: 0;\\n        z-index: 1000;\\n      \";\n      if (_onOpen) _onOpen(event);\n    },\n    onClose: function onClose(event) {\n      if (isServer) return;\n      body_scroll_lock_1.enableBodyScroll(document.body); // eslint-disable-next-line no-param-reassign\n\n      event.portal.current.removeAttribute('style');\n      if (_onClose) _onClose(event);\n    },\n    onPortalClick: function onPortalClick(_a) {\n      var target = _a.target;\n      var clickingOutsideModal = modal && modal.current && !modal.current.contains(target);\n      if (clickingOutsideModal) closePortal();\n    }\n  }, config)),\n      isOpen = _b.isOpen,\n      togglePortal = _b.togglePortal,\n      openPortal = _b.openPortal,\n      closePortal = _b.closePortal,\n      Backdrop = _b.Portal,\n      ref = _b.ref,\n      portalRef = _b.portalRef;\n\n  var ModalWithBackdrop = react_1.useCallback(function (props) {\n    return react_1.default.createElement(Backdrop, null, react_1.default.createElement(\"div\", __assign({\n      ref: modal,\n      style: utils_1.parseCSSText(modalStyles)\n    }, props)));\n  }, [modalStyles]); // you cannot spread in this because it will give different values for ModalWithBackdrop\n  // when doing array vs object destructuring\n\n  return Object.assign([openPortal, closePortal, isOpen, ModalWithBackdrop, togglePortal, ref, portalRef, modal], {\n    Modal: ModalWithBackdrop,\n    toggleModal: togglePortal,\n    openModal: openPortal,\n    closeModal: closePortal,\n    isOpen: isOpen,\n    targetRef: ref,\n    backdropRef: portalRef,\n    modalRef: modal\n  });\n};\n\nexports.default = exports.useModal;","map":{"version":3,"sources":["../src/useModal.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result[\"default\"] = mod;\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = __importStar(require(\"react\"));\r\nvar UseModalContext_1 = __importDefault(require(\"./UseModalContext\"));\r\nvar react_useportal_1 = __importDefault(require(\"react-useportal\"));\r\nvar body_scroll_lock_1 = require(\"body-scroll-lock\");\r\nvar utils_1 = require(\"./utils\");\r\nvar use_ssr_1 = __importDefault(require(\"use-ssr\"));\r\nvar defaults = {\r\n    onOpen: function () { },\r\n    onClose: function () { },\r\n    background: ''\r\n};\r\nvar modalStyles = \"\\n  position: fixed;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%,-50%);\\n  z-index: 1000;\\n\";\r\nexports.useModal = function (_a) {\r\n    if (_a === void 0) { _a = defaults; }\r\n    var onOpen = _a.onOpen, onClose = _a.onClose, background = _a.background, config = __rest(_a, [\"onOpen\", \"onClose\", \"background\"]);\r\n    var isServer = use_ssr_1.default().isServer;\r\n    var context = react_1.useContext(UseModalContext_1.default);\r\n    var bg = background === null ? '' : background || context.background;\r\n    var modal = react_1.useRef();\r\n    var _b = react_useportal_1.default(__assign({ onOpen: function (event) {\r\n            if (isServer)\r\n                return;\r\n            body_scroll_lock_1.disableBodyScroll(document.body);\r\n            // eslint-disable-next-line no-param-reassign\r\n            event.portal.current.style.cssText = \"\\n        position: absolute;\\n        background: \" + (bg ? bg : 'transparent') + \";\\n        width: 100vw;\\n        height: 100vh;\\n        top: \" + window.scrollY + \"px;\\n        left: 0;\\n        z-index: 1000;\\n      \";\r\n            if (onOpen)\r\n                onOpen(event);\r\n        },\r\n        onClose: function (event) {\r\n            if (isServer)\r\n                return;\r\n            body_scroll_lock_1.enableBodyScroll(document.body);\r\n            // eslint-disable-next-line no-param-reassign\r\n            event.portal.current.removeAttribute('style');\r\n            if (onClose)\r\n                onClose(event);\r\n        },\r\n        onPortalClick: function (_a) {\r\n            var target = _a.target;\r\n            var clickingOutsideModal = modal && modal.current && !modal.current.contains(target);\r\n            if (clickingOutsideModal)\r\n                closePortal();\r\n        } }, config)), isOpen = _b.isOpen, togglePortal = _b.togglePortal, openPortal = _b.openPortal, closePortal = _b.closePortal, Backdrop = _b.Portal, ref = _b.ref, portalRef = _b.portalRef;\r\n    var ModalWithBackdrop = react_1.useCallback(function (props) { return (react_1.default.createElement(Backdrop, null,\r\n        react_1.default.createElement(\"div\", __assign({ ref: modal, style: utils_1.parseCSSText(modalStyles) }, props)))); }, [modalStyles]);\r\n    // you cannot spread in this because it will give different values for ModalWithBackdrop\r\n    // when doing array vs object destructuring\r\n    return Object.assign([openPortal, closePortal, isOpen, ModalWithBackdrop, togglePortal, ref, portalRef, modal], {\r\n        Modal: ModalWithBackdrop,\r\n        toggleModal: togglePortal,\r\n        openModal: openPortal,\r\n        closeModal: closePortal,\r\n        isOpen: isOpen,\r\n        targetRef: ref,\r\n        backdropRef: portalRef,\r\n        modalRef: modal,\r\n    });\r\n};\r\nexports.default = exports.useModal;\r\n//# sourceMappingURL=useModal.js.map"]},"metadata":{},"sourceType":"script"}