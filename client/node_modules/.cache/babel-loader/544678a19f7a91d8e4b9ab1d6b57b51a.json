{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\react_file_uploader\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\react_file_uploader\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\react_file_uploader\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\react_file_uploader\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\react_file_uploader\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\jolej\\\\Documents\\\\GitHub\\\\react_file_uploader\\\\client\\\\src\\\\pages\\\\EditObject\\\\useFormEdit.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory, Redirect, useParams } from \"react-router-dom\";\nimport { editObject } from '../../Redux/actions/objectActions';\n\nvar useForm = function useForm(callback, validate) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      values = _useState2[0],\n      setValues = _useState2[1];\n\n  useEffect(function () {\n    var fetchData =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios('http://localhost:3007/albums/' + UserId);\n\n              case 2:\n                result = _context.sent;\n                setValues(result.data);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetchData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchData();\n  }, []);\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isSubmitting = _useState4[0],\n      setIsSubmitting = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      errors = _useState6[0],\n      setErrors = _useState6[1];\n\n  var dispatch = useDispatch();\n  var UserId = parseInt(useParams().id);\n  var history = useHistory(); // Handle Change\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setValues(_objectSpread({}, values, _defineProperty({}, name, value)));\n  }; // Submitting\n\n\n  var objectPattern = {\n    artist: values.artist,\n    title: values.title,\n    description: values.description,\n    image: values.image,\n    year: values.year\n  };\n\n  var onSubmit = function onSubmit(e) {\n    e.preventDefault();\n    setErrors(validate(values));\n    dispatch(editObject(UserId, objectPattern));\n    setIsSubmitting(true);\n    callback();\n    return React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    });\n  };\n\n  useEffect(function () {\n    if (Object.keys(errors).length < 1 && isSubmitting === true) {\n      history.push('/');\n      callback();\n    }\n  }, [errors]); // Return\n\n  return {\n    handleChange: handleChange,\n    onSubmit: onSubmit,\n    values: values,\n    errors: errors\n  };\n};\n\nexport default useForm;","map":{"version":3,"sources":["C:\\Users\\jolej\\Documents\\GitHub\\react_file_uploader\\client\\src\\pages\\EditObject\\useFormEdit.js"],"names":["React","axios","useState","useEffect","useDispatch","useHistory","Redirect","useParams","editObject","useForm","callback","validate","values","setValues","fetchData","UserId","result","data","isSubmitting","setIsSubmitting","errors","setErrors","dispatch","parseInt","id","history","handleChange","e","target","name","value","objectPattern","artist","title","description","image","year","onSubmit","preventDefault","Object","keys","length","push"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport axios from 'axios'\r\nimport { useState, useEffect } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useHistory, Redirect, useParams } from \"react-router-dom\";\r\nimport { editObject } from '../../Redux/actions/objectActions'\r\n\r\n\r\nconst useForm = (callback, validate) => {\r\n     \r\n  const [values, setValues] = useState('')  \r\n  \r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const result = await axios(\r\n        'http://localhost:3007/albums/'+ UserId,\r\n      );\r\n      setValues(result.data);\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n\r\n  const dispatch = useDispatch() \r\n  const UserId = parseInt(useParams().id)\r\n  const history = useHistory()\r\n\r\n \r\n// Handle Change\r\n\r\nconst handleChange = e => {\r\n    const {name, value} = e.target\r\n    setValues({\r\n       ...values,\r\n       [name] : value\r\n     })\r\n   }\r\n\r\n// Submitting\r\n\r\nconst objectPattern = {\r\n  artist: values.artist,\r\n  title: values.title,\r\n  description: values.description,\r\n  image: values.image,\r\n  year: values.year\r\n};    \r\n\r\nconst onSubmit = (e) => {\r\n      e.preventDefault();    \r\n      setErrors(validate(values));\r\n      dispatch(editObject(UserId, objectPattern));   \r\n      setIsSubmitting(true)\r\n      callback();\r\n    return <Redirect to='/' />\r\n    };\r\n\r\n    useEffect(() => {\r\n      if (Object.keys(errors).length < 1 && isSubmitting === true) {\r\n       history.push('/')\r\n        callback();\r\n      }\r\n    }, [errors]);\r\n\r\n// Return\r\n\r\n\r\nreturn {\r\n        handleChange,\r\n        onSubmit,\r\n        values,\r\n        errors\r\n      };\r\n};\r\n\r\nexport default useForm;"]},"metadata":{},"sourceType":"module"}